if(!document.getElementById("css-percentage-circle")){var link=document.createElement("link");link.id="css-percentage-circle",link.rel="stylesheet",link.href="https://cdn.rawgit.com/afuersch/css-percentage-circle/c9f4ea10/css/circle.css",document.head.appendChild(link)}UploadArea=function(e,o){var t=this;if(t.divId=e,t.options={allowDrop:!0,allowMultiple:!0,sendTo:"https://posttestserver.com/post.php",progressArea:"UploadAreaProgress",progressColor:"green",onFilesReceived:function(e){}},t.previousProgressPercentage=0,!e)return void console.error("divId not set... ABORTING!");if(o){optionkeys=Object.keys(o);for(var s=0;s<optionkeys.length;s++)t.options[optionkeys[s]]=o[optionkeys[s]]}var r=document.getElementById(t.divId);if(r){r.addEventListener("dragover",function(e){t.ondragover(e)}),r.addEventListener("drop",function(e){t.ondrop(e)}),r.addEventListener("click",function(e){var o=document.getElementById("fileInput");o.click()}),r.style.cursor="pointer";var n=document.createElement("input");n.type="file",n.style.display="none",n.id="fileInput",t.options.allowMultiple&&n.setAttribute("multiple",""),n.addEventListener("change",function(e){t.handleFiles(this.files)}),r.appendChild(n)}var i=document.getElementById(t.options.progressArea);i&&(UploadArea.hideElement(t.options.progressArea),i.innerHTML='<div id="cssProgressArea" class="c100 p0 '+t.options.progressColor+'"><span id="cssProgressAreaSpan"></span><div class="slice"><div class="bar"></div><div class="fill"></div></div></div>')},UploadArea.prototype.ondragover=function(e){e.preventDefault()},UploadArea.prototype.handleFiles=function(e){this.options.onFilesReceived(e),this.options.upload?this.options.upload(e):this.upload(e)},UploadArea.prototype.ondrop=function(e){if(this.options.allowDrop){var o=this;e.preventDefault();var t=e.dataTransfer;if(t.items){var s=[];if(o.multiple)for(var r=0;r<t.items.length;r++){var n=t.items[r];if("file"==n.kind){var i=n.getAsFile();s.push(i)}}else t.items.length>0&&s.push(t.items[0].getAsFile());o.handleFiles(s)}}},UploadArea.hideElement=function(e){var o=document.getElementById(e);o&&(o.style.display="none")},UploadArea.showElement=function(e){var o=document.getElementById(e);o&&(o.style.display="block")},UploadArea.prototype.resetProgress=function(){var e=document.getElementById("cssProgressArea");if(e){var o=document.getElementById("cssProgressAreaSpan");o.innerHTML="0%",e.classList.remove("p100"),e.classList.add("p0")}},UploadArea.prototype.onComplete=function(e){this.options.complete&&this.options.complete(e)},UploadArea.prototype.onError=function(e){this.options.complete&&this.options.complete(e)},UploadArea.prototype.onProgress=function(e){var o=this;if(UploadArea.hideElement(o.divId),UploadArea.showElement(o.options.progressArea),e.lengthComputable){var t=Math.floor(e.loaded/e.total*100),s=document.getElementById("cssProgressArea");if(s){var r=document.getElementById("cssProgressAreaSpan");r.innerHTML=t+"%",s.classList.remove("p"+o.previousProgressPercentage),s.classList.add("p"+t)}100==t&&(UploadArea.showElement(o.divId),UploadArea.hideElement(o.options.progressArea),o.previousProgressPercentage=0),o.previousProgressPercentage=t}},UploadArea.prototype.upload=function(e){var o=this;if(e&&e.length>0&&e&&e.length>0){for(var t=new FormData,s=0;s<e.length;s++){var r=e[s];t.append(r.name,r)}var n=new XMLHttpRequest;n.open("POST",o.options.sendTo,!0),n.upload.onprogress=function(e){o.options.progress?o.options.progress(e):o.onProgress(e)},n.onload=function(){200==this.status?o.onComplete(this.responseText):o.onError(this.responseText)},n.send(t),o.options.progress||(o.resetProgress(),UploadArea.showElement(o.options.progressArea),UploadArea.hideElement(o.divId))}};