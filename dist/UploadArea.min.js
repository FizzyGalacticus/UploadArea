"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),UploadArea=function(){function e(t,n){var o=this;if(_classCallCheck(this,e),this.instanceNumber=++e.instances,this.divId=t,this.options={required:!1,allowDrop:!0,allowMultiple:!0,sendTo:"https://posttestserver.com/post.php",onFilesReceived:function(e){}},this.previousProgressPercentage=0,n)for(var i=Object.keys(n),s=0;s<i.length;s++)this.options[i[s]]=n[i[s]];var r=document.getElementById(this.divId);if(r){r.addEventListener("dragover",function(e){o.ondragover(e)}),r.addEventListener("drop",function(e){o.ondrop(e)}),r.addEventListener("click",function(e){document.getElementById("uploadAreaFileInput"+o.instanceNumber).click()}),r.style.cursor="pointer";var a=document.createElement("input");a.type="file",a.style.display="none",a.id="uploadAreaFileInput"+this.instanceNumber,this.options.required&&a.setAttribute("required",""),this.options.allowMultiple&&a.setAttribute("multiple",""),a.addEventListener("change",function(e){o.handleFiles(a.files)}),r.appendChild(a)}}return _createClass(e,[{key:"ondragover",value:function(e){e.preventDefault()}},{key:"handleFiles",value:function(e){if(!Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));e=t}this.options.onFilesReceived(e),this.options.upload?this.options.upload(e):this.upload(e)}},{key:"ondrop",value:function(e){if(this.options.allowDrop){e.preventDefault();var t=e.dataTransfer;if(t.items){var n=[];if(this.options.allowMultiple)for(var o=0;o<t.items.length;o++){var i=t.items[o];if("file"==i.kind){var s=i.getAsFile();n.push(s)}}else t.items.length>0&&n.push(t.items[0].getAsFile());this.handleFiles(n)}}}},{key:"onComplete",value:function(e){this.options.complete&&this.options.complete(e)}},{key:"onError",value:function(e){this.options.error&&this.options.error(e)}},{key:"upload",value:function(e){var t=this;if(e&&e.length>0){for(var n=new FormData,o=0;o<e.length;o++){var i=e[o];n.append(i.name,i)}if(additionalData)for(var s=Object.keys(additionalData),r=0;r<s.length;r++)n.append(s[r],additionalData[s[r]]);var a=new XMLHttpRequest;a.open("POST",this.options.sendTo,!0),a.upload.onprogress=function(e){t.options.progress&&t.options.progress(e)},a.onload=function(){200==a.status?t.onComplete(a.responseText):t.onError(a.responseText)},a.send(n)}}}],[{key:"hideElement",value:function(e){var t=document.getElementById(e);t&&(t.style.display="none")}},{key:"showElement",value:function(e){var t=document.getElementById(e);t&&(t.style.display="block")}}]),e}();UploadArea.instances=0;